{% extends "layout.html" %}

{% block title %}Outreach - Sway PR Data{% endblock %}
{% block page_title %}Outreach{% endblock %}

{% block content %}
<div class="outreach-container">
    <h2>Select Staff Member for Outreach</h2>
    <p>Select which staff member you would like to use for this outreach campaign.</p>

    <div id="staff-list-container">
        <!-- Staff list will be loaded here by JavaScript -->
        <p>Loading staff members...</p>
    </div>

    <div id="add-staff-container" style="display: none;">
        <hr>
        <h3>No Staff Found</h3>
        <p>There are no staff members registered. Please add one to continue.</p>
        <form id="add-staff-form">
            <div class="form-group">
                <label for="staff-name">Staff Name</label>
                <input type="text" id="staff-name" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="staff-email">Staff Email</label>
                <input type="email" id="staff-email" class="form-control" required>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Add Staff Member</button>
            </div>
        </form>
    </div>

    <div id="contact-selection-container" style="display: none;">
        <hr>
        <h2>Select Media Contacts</h2>
        <p>Select the contacts you want to target for this outreach.</p>

        <div class="form-group" style="display: flex; gap: 1rem; align-items: center;">
            <input id="contact-search" type="search" class="form-control" placeholder="Search contacts by name, email, or outlet..." style="flex-grow: 1;" />
            <button id="select-all-visible-btn" class="btn btn-secondary">Select All Visible</button>
        </div>

        <div id="contacts-list" class="contact-list-container">
            <!-- Contacts will be loaded here by JavaScript -->
        </div>

        <div class="pager">
            <button id="prev-page-btn" class="btn btn-secondary" disabled>Previous</button>
            <span id="page-indicator">Page 1 of 1</span>
            <button id="next-page-btn" class="btn btn-secondary" disabled>Next</button>
            <select id="page-size-select" class="form-control" style="width: auto; display: inline-block; margin-left: 1rem;">
                <option value="25">25 per page</option>
                <option value="50" selected>50 per page</option>
                <option value="100">100 per page</option>
            </select>
        </div>

        <div class="form-actions">
            <div id="selection-summary" aria-live="polite">0 contacts selected</div>
            <button id="confirm-outreach-btn" class="btn btn-primary" disabled>Confirm Selections</button>
        </div>

        <details class="payload-preview-container">
            <summary>Preview Payload</summary>
            <pre id="payload-preview"></pre>
        </details>
    </div>
</div>
{% endblock %}

{% block extra_js %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/outreach.css') }}">
    <script src="{{ url_for('static', filename='js/outreach.js') }}"></script>
{% endblock %}
